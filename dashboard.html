<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="dashboard.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
    <header class="dash-header">
        <h1>Dashboard</h1>
        <div class="dash-actions">
            <button id="btn-new" class="btn primary"><i class="fa fa-plus"></i> New Villa</button>
            <button id="btn-refresh" class="btn"><i class="fa fa-rotate"></i> Refresh</button>
        </div>
    </header>

    <main class="dash-main">
        <div class="top-tabs">
            <button class="top-tab-btn active" data-top-tab="villas">Villas</button>
            <button class="top-tab-btn" data-top-tab="logo">Logo</button>
            <button class="top-tab-btn" data-top-tab="hero">Hero Images</button>
        </div>
        <section class="panel top-tab-section" id="tab-villas">
            <div class="panel-header">
                <h2>Villas</h2>
                <div class="search-row">
                    <input id="search" type="text" placeholder="Search by title/location..." />
                </div>
            </div>
            <div class="table-wrap">
                <table class="table row-scroll" id="villas-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Images</th>
                            <th>Title</th>
                            <th>Location</th>
                            <th>Price</th>
                            <th>Rating</th>
                            <th>Featured</th>
                            <th>Bookings</th>
                            <th>Type</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <!-- Cards with tabs -->
            <div class="cards-wrap">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="all">All Villas</button>
                    <button class="tab-btn" data-tab="promoted">Promoted Villa</button>
                </div>
                <div id="villas-cards" class="cards-scroller"></div>
            </div>
        </section>

        <section class="panel">
            <div class="panel-header">
                <h2 id="form-title">Add New Villa</h2>
            </div>
            <form id="villa-form" class="form">
                <input type="hidden" id="villa-id" />
                <div class="grid-2">
                    <div class="form-group">
                        <label>Title</label>
                        <input id="title" type="text" required />
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input id="location" type="text" required />
                    </div>
                </div>
                <div class="grid-4">
                    <div class="form-group">
                        <label>Price (number)</label>
                        <input id="price" type="number" min="0" step="1" required />
                    </div>
                    <div class="form-group">
                        <label>Rating (0-5)</label>
                        <input id="rating" type="number" min="0" max="5" step="0.1" required />
                    </div>
                    <div class="form-group">
                        <label>Bookings This Month</label>
                        <input id="bookingsThisMonth" type="number" min="0" step="1" />
                    </div>
                    <div class="form-group">
                        <label>Type</label>
                        <select id="type">
                            <option value="resort">resort</option>
                            <option value="outside">outside</option>
                        </select>
                    </div>
                </div>
                <div class="grid-4">
                    <div class="form-group">
                        <label>Bedrooms</label>
                        <input id="bedrooms" type="number" min="0" step="1" />
                    </div>
                    <div class="form-group">
                        <label>Bathrooms</label>
                        <input id="bathrooms" type="number" min="0" step="1" />
                    </div>
                    <div class="form-group">
                        <label>Guests</label>
                        <input id="guests" type="number" min="0" step="1" />
                    </div>
                    <div class="form-group">
                        <label>Size (text)</label>
                        <input id="size" type="text" placeholder="e.g. 250 mÂ²" />
                    </div>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Images</label>
                    <div id="images-previews" class="previews-grid"></div>
                    <textarea id="images" rows="2" class="hidden" placeholder="https://..., https://..."></textarea>
                </div>
                <div class="form-group">
                    <label>Upload Images to Supabase Storage</label>
                    <input id="image-files" type="file" accept="image/*" multiple />
                    <small class="muted">Upload Villa Images.</small>
                </div>
                <div class="grid-2">
                    <div class="form-group">
                        <label>Features (comma-separated)</label>
                        <input id="features" type="text" placeholder="Private Pool, Ocean View" />
                    </div>
                    <div class="form-group">
                        <label>Amenities (comma-separated)</label>
                        <input id="amenities" type="text" placeholder="WiFi, Breakfast" />
                    </div>
                </div>
                <div class="form-group inline">
                    <label class="checkbox">
                        <input id="isFeatured" type="checkbox" /> Featured
                    </label>
                    <label class="checkbox">
                        <input id="isBaru" type="checkbox" /> Baru
                    </label>
                    <label class="checkbox">
                        <input id="isHot" type="checkbox" /> Hot
                    </label>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn primary" id="btn-save"><i class="fa fa-save"></i> Save</button>
                    <button type="button" class="btn" id="btn-cancel"><i class="fa fa-xmark"></i> Cancel</button>
                    <button type="button" class="btn danger" id="btn-delete" style="display:none;"><i
                            class="fa fa-trash"></i> Delete</button>
                </div>
            </form>
        </section>
    </main>

    <!-- Logo Tab -->
    <section class="panel top-tab-section hidden" id="tab-logo">
        <div class="panel-header">
            <h2>Website Logo</h2>
        </div>
        <div class="form" style="padding-top:8px;">
            <div class="form-group">
                <label>Current Logo</label>
                <div style="display:flex; align-items:center; gap:12px;">
                    <img id="logo-preview" src="" alt="Logo Preview"
                        style="width:96px; height:96px; object-fit:contain; background:#0e1420; border:1px solid var(--border); border-radius:8px;" />
                    <div class="muted">Upload a new logo to replace the website logo.</div>
                </div>
            </div>
            <div class="form-group">
                <label>Upload New Logo</label>
                <input id="logo-file" type="file" accept="image/*" />
            </div>
        </div>
    </section>

    <!-- Hero Images Tab -->
    <section class="panel top-tab-section hidden" id="tab-hero">
        <div class="panel-header">
            <h2>Hero Images</h2>
        </div>
        <div class="form" style="padding-top:8px;">
            <div class="form-group">
                <label>Current Images</label>
                <div id="hero-previews" class="previews-grid"></div>
            </div>
            <div class="form-group">
                <label>Upload Images</label>
                <input id="hero-files" type="file" accept="image/*" multiple />
            </div>
        </div>
    </section>

    <template id="row-template">
        <tr>
            <td class="col-id"></td>
            <td class="col-images"></td>
            <td class="col-title"></td>
            <td class="col-location"></td>
            <td class="col-price"></td>
            <td class="col-rating"></td>
            <td class="col-featured"></td>
            <td class="col-bookings"></td>
            <td class="col-type"></td>
            <td class="col-actions">
                <button class="btn small" data-action="edit"><i class="fa fa-pen"></i></button>
                <button class="btn small danger" data-action="delete"><i class="fa fa-trash"></i></button>
            </td>
        </tr>
    </template>

    <!-- Auth overlay -->
    <div id="auth-overlay" class="auth-overlay" style="display:none;">
        <div class="auth-card">
            <div class="auth-brand">
                <i class="fa fa-shield"></i>
            </div>
            <h2>Administrator Access</h2>
            <p class="muted">Enter your dashboard password to continue.</p>
            <form id="auth-form" class="auth-form">
                <input id="auth-password" type="password" placeholder="Password" autocomplete="current-password"
                    required />
                <button type="submit" class="btn primary" style="width:100%"><i class="fa fa-unlock"></i>
                    Unlock</button>
            </form>
            <p id="auth-error" class="auth-error" style="display:none;">Incorrect password. Please try again.</p>
        </div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="supabase-init.js"></script>
    <script src="dashboard.js"></script>
</body>

</html>